---
layout: default
title: Ryan Morr
---

<main class="block">
    <header class="page-header">
        <h1 class="page-title">Projects</h1>
    </header>
    <section class="page-content"></section>
</main>

<script>
var container = document.querySelector('.page-content');

var tpl = [
    '<section class="project">',
        '<h3 class="project-title"><a href="{url}">{name}</a></h3>',
        '<p class="project-description">{description}</p>',
    '</section>'
].join('');

loadJSON('https://api.github.com/users/ryanmorr/repos', function(repos) {
    repos.sort(function (a, b) {
        return new Date(b.pushed_at).getTime() - new Date(a.pushed_at).getTime();
    }); 
    var frag = document.createDocumentFragment();
    repos.forEach(function(repo) {
        frag.appendChild(parseHTML(interpolate(tpl, {
            name: repo.name,
            url: repo.html_url,
            description: repo.description
        })));
    });
    container.appendChild(frag);
});

function interpolate(tpl, values) {
    return tpl.replace(/\{\s*(.+?)\s*\}/g, function(all, token) {
        return values[token];
    });
}

function parseHTML(html) {
    var div = document.createElement('div');
    div.innerHTML = html;
    return div.firstChild;
}

function loadJSON(url, callback) {   
    var xhr = new XMLHttpRequest();
    xhr.overrideMimeType('application/json');
    xhr.open('GET', url, true);
    xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            callback(JSON.parse(xhr.responseText));
        }
    };
    xhr.send();  
}
</script>
